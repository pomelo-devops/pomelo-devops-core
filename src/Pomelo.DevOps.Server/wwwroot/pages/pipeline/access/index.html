<!--
    Copyright (c) Yuko(Yisheng) Zheng. All rights reserved.
    Licensed under the MIT. See LICENSE in the project root for license information.
-->
<div class="pipeline-access-main" v-if="result">
    <div class="pipeline-access-main-wrap">
        <div class="pipeline-access-table-outer">
            <div class="form-filter-outer">
                <div class="form-filter">
                    <svg t="1670836634332" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="20" height="20"><path d="M512 128c212.075 0 384 171.925 384 384S724.075 896 512 896 128 724.075 128 512s171.925-384 384-384z m0 64c-176.725 0-320 143.275-320 320 0 91.243 38.187 173.547 99.413 231.85l108.523-129.386a195.861 195.861 0 0 0 60.01 28.053l-117.93 140.651A318.507 318.507 0 0 0 512 832a318.507 318.507 0 0 0 161.237-43.52l-120.17-143.296a195.541 195.541 0 0 0 62.442-25.088L725.1 750.72A319.21 319.21 0 0 0 832 512c0-176.725-143.275-320-320-320z m0 106.667a154.07 154.07 0 0 1 76.373 287.914l-0.64 0.363-0.704 0.405a153.685 153.685 0 0 1-4.928 2.624l5.632-3.029A153.685 153.685 0 0 1 512 606.805a153.643 153.643 0 0 1-58.07-11.306l-0.213-0.086a153.173 153.173 0 0 1-5.653-2.453l5.888 2.56a153.195 153.195 0 0 1-20.97-10.475A154.07 154.07 0 0 1 512 298.667z m0 64a90.07 90.07 0 1 0 0 180.138 90.07 90.07 0 0 0 0-180.138z" p-id="4103"></path></svg>
                    <input class="pipeline-access-header-search text" type="text" v-bind:placeholder="$root.localization.sr('PIPELINE_ACCESS_MEMBER_NAME')" v-model="search.name" />
                    <a class="form-clear-button" title="Clear" v-on:click="search.name = null">
                        <svg t="1670831104615" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5081" width="20" height="20"><path d="M547.14368 512l329.45664 329.45664a23.04 23.04 0 0 1-32.58368 32.58368L514.56 544.58368l-329.45664 329.45664a23.04 23.04 0 0 1-32.58368-32.58368L481.97632 512 152.51968 182.54336a23.04 23.04 0 0 1 32.58368-32.58368L514.56 479.41632l329.45664-329.45664a23.04 23.04 0 0 1 32.58368 32.58368L547.14368 512z" fill="#000000" p-id="5082"></path></svg>
                    </a>
                </div>
                <div class="form-filter" style="margin-left: 15px">
                    <svg t="1670392603477" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5477" width="20" height="20"><path d="M469.333533 968.08a52.986667 52.986667 0 0 1-37.713333-15.62l-416-416A52.986667 52.986667 0 0 1 0.0002 498.746667V138.666667a53.393333 53.393333 0 0 1 53.333333-53.333334h360.08a52.986667 52.986667 0 0 1 37.713334 15.62l416 416a53.4 53.4 0 0 1 0 75.426667l-360.08 360.08a52.986667 52.986667 0 0 1-37.713334 15.62zM53.333533 128a10.666667 10.666667 0 0 0-10.666666 10.666667v360.08a10.573333 10.573333 0 0 0 3.126666 7.54l416 416a10.666667 10.666667 0 0 0 15.08 0l360.08-360.08a10.666667 10.666667 0 0 0 0-15.08l-416-416a10.573333 10.573333 0 0 0-7.54-3.126667z m224 341.333333c-58.813333 0-106.666667-47.853333-106.666666-106.666666s47.853333-106.666667 106.666666-106.666667 106.666667 47.853333 106.666667 106.666667-47.853333 106.666667-106.666667 106.666666z m0-170.666666a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z m335.086667 676.42l382.706667-382.706667a53.4 53.4 0 0 0 0-75.426667L569.753533 91.58a21.333333 21.333333 0 0 0-30.173333 30.173333l425.373333 425.373334a10.666667 10.666667 0 0 1 0 15.08l-382.706666 382.706666a21.333333 21.333333 0 0 0 30.173333 30.173334z" fill="#5C5C66" p-id="5478"></path></svg>
                    <select class="pipeline-access-header-search select" v-model="search.accessType">
                        <option v-bind:value="null">{{ $root.localization.sr('PIPELINE_ACCESS_FILTER_BY_ROLES') }}</option>
                        <option value="Reader">{{ $root.localization.sr('PIPELINE_ACCESS_ROLES_READER') }}</option>
                        <option value="Collaborator">{{ $root.localization.sr('PIPELINE_ACCESS_ROLES_COLLABORATOR') }}</option>
                        <option value="Master">{{ $root.localization.sr('PIPELINE_ACCESS_ROLES_MASTER') }}</option>
                    </select>
                </div>
                <a class="pipeline-access-header-search-button new-job"
                   v-bind:href="`/project/${projectId}/pipeline/${pipelineId}/access/new`"
                   v-if="$root.hasPermissionToPipeline(projectId, pipelineId, 2)">
                    <svg t="1670399129873" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4256" width="20" height="20"><path d="M800 480l-256 0L544 224c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 256L224 480c-17.664 0-32 14.336-32 32s14.336 32 32 32l256 0 0 256c0 17.696 14.336 32 32 32s32-14.304 32-32l0-256 256 0c17.696 0 32-14.336 32-32S817.696 480 800 480z" p-id="4257"></path></svg>
                    <span>{{ $root.localization.sr('PIPELINE_ACCESS_ADD_ACCESS') }}</span>
                </a>
            </div>
            <table class="pipeline-access-table">
                <colgroup>
                    <col style="width: 25px;" />
                </colgroup>
                <thead v-if="result.data.length">
                    <tr>
                        <th></th>
                        <th>{{ $root.localization.sr('PIPELINE_ACCESS_MEMBER') }}</th>
                        <th>{{ $root.localization.sr('PIPELINE_ACCESS_ACCESS_TYPE') }}</th>
                        <th v-if="$root.hasPermissionToPipeline(projectId, pipelineId, true)">{{ $root.localization.sr('PIPELINE_ACCESS_ACCESS_ACTIONS') }}</th>
                    </tr>
                </thead>
                <tbody v-for="access in result.data">
                    <tr>
                        <td>
                            <img class="pipeline-access-avatar" src="/assets/img/no-avatar.png" />
                        </td>
                        <td>{{ access.user.displayName }}</td>
                        <td>{{ $root.localization.sr('PIPELINE_ACCESS_ROLES_' + access.accessType.toUpperCase()) }}</td>
                        <td v-if="$root.hasPermissionToPipeline(projectId, pipelineId, true)">
                            <template v-if="userId != access.userId">
                                <a class="pipeline-access-button" v-bind:href="`/project/${projectId}/pipeline/${pipelineId}/access/edit?userId=${access.userId}`">{{ $root.localization.sr('PIPELINE_ACCESS_ACCESS_ACTIONS_EDIT') }}</a>
                                <a v-on:click="remove(access)" class="pipeline-access-button danger">{{ $root.localization.sr('PIPELINE_ACCESS_ACCESS_ACTIONS_DELETE') }}</a>
                            </template>
                        </td>
                    </tr>
                </tbody>
                <tbody class="no-job" v-if="!result.data.length">
                    <tr>
                        <td v-bind:colspan="$root.hasPermissionToPipeline(projectId, pipelineId, true) ? 3 : 2">{{ $root.localization.sr('PIPELINE_ACCESS_NO_RESULT') }}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="pipeline-job-pagination">
            <ul class="pipeline-job-nav">
                <li class="pipeline-job-nav-page" v-on:click="getAccesses(1)"><a>«</a></li>
                <li class="pipeline-job-nav-page" v-for="x in paging" v-bind:class="{ active: result && result.currentPage == x }" v-on:click="getAccesses(x)"><a>{{ x }}</a></li>
                <li class="pipeline-job-nav-page" v-on:click="getAccesses(result.totalPages)"><a>»</a></li>
            </ul>
        </div>
    </div>
</div>