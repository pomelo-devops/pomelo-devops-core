<!--
    Copyright (c) Yuko(Yisheng) Zheng. All rights reserved.
    Licensed under the MIT. See LICENSE in the project root for license information.
-->
<div class="pipeline-playbook-sidebar">
    <div id="stages" class="dragula">
        <div class="pipeline-playbook-stage" v-for="stage in pipeline.stages" v-bind:data-id="stage.temp">
            <div class="pipeline-playbook-stage-header">
                <span class="stage">#{{ stage.order }}</span>
                <span class="title">{{ stage.name }}</span>
                <svg title="Expand steps" v-if="!!!stage.toggled" v-on:click="stage.toggled = !!!stage.toggled" v-bind:class="{ active: !!stage.toggled }" class="toggle icon" t="1669717072449" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3395" width="20" height="20"><path d="M904.533333 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0L512 644.266667 179.2 311.466667c-17.066667-17.066667-42.666667-17.066667-59.733333 0-17.066667 17.066667-17.066667 42.666667 0 59.733333l362.666666 362.666667c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866667-12.8l362.666666-362.666667c17.066667-17.066667 17.066667-42.666667 0-59.733333z" p-id="3396"></path></svg>
                <svg title="Collapse steps" v-else v-on:click="stage.toggled = !!!stage.toggled" v-bind:class="{ active: !!stage.toggled }" class="toggle icon" t="1669719394467" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3529" width="20" height="20"><path d="M904.533333 674.133333l-362.666666-362.666666c-17.066667-17.066667-42.666667-17.066667-59.733334 0l-362.666666 362.666666c-17.066667 17.066667-17.066667 42.666667 0 59.733334 17.066667 17.066667 42.666667 17.066667 59.733333 0L512 401.066667l332.8 332.8c8.533333 8.533333 19.2 12.8 29.866667 12.8s21.333333-4.266667 29.866666-12.8c17.066667-17.066667 17.066667-42.666667 0-59.733334z" p-id="3530"></path></svg>
                <svg title="Edit stage" v-on:click="editStage(stage)" v-bind:class="{ active: active == 'stage-' + stage.temp }" t="1669819065691" class="toggle icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7112" width="20" height="20"><path d="M70.413465 401.901008c25.653859 0.538589 51.10929-5.867789 73.503266-18.482118 21.571919-12.132433 40.280811-30.047614 53.547116-53.036873h0.028347c13.266305-22.989259 19.417562-48.132876 19.16244-72.907983-0.283468-25.625512-7.45521-50.825822-20.749862-72.794597-5.555974-9.156018-7.313476-19.530949-5.58432-29.253903 1.729155-9.807995 6.916621-18.99236 15.250581-25.682205 19.360868-15.534049 39.912302-29.622412 61.455874-42.095007 21.430185-12.387554 43.824161-23.187687 67.011848-32.230317h0.085041c9.921382-3.855166 20.438047-3.770125 29.792492-0.368509 9.382793 3.401617 17.546673 10.11981 22.677445 19.445909 12.359207 22.53571 30.61455 41.357989 52.668364 54.425866 21.260104 12.585982 46.120252 19.814417 72.737903 19.814417s51.477799-7.228435 72.737903-19.814417c22.053815-13.067877 40.309157-31.890156 52.668364-54.425866 5.130772-9.326099 13.294652-16.044292 22.677445-19.445909 9.354446-3.401617 19.899457-3.486657 29.792492 0.368509h0.085041c23.187687 9.042631 45.581663 19.842764 67.011848 32.230317 21.571919 12.472594 42.095006 26.560957 61.455874 42.095007 8.333961 6.689846 13.521426 15.874211 15.250581 25.682205 1.729155 9.722954-0.028347 20.097885-5.58432 29.253903-13.294652 21.968774-20.466394 47.169084-20.749862 72.794597-0.255121 24.746761 5.896136 49.890378 19.190787 72.907983v0.085041c13.237958 22.904219 31.918503 40.791053 53.518769 52.951832 22.45067 12.614328 47.877754 19.020706 73.531613 18.482118 10.630052-0.226774 20.49474 3.486657 28.120031 9.921382 7.710331 6.463072 13.067877 15.562396 14.655299 26.079061 1.842542 12.019046 3.231536 24.321559 4.16698 36.879193 0.963791 12.500941 1.445687 24.916842 1.445687 37.219356s-0.481896 24.746761-1.445687 37.247702c-0.935445 12.529288-2.324438 24.831802-4.16698 36.879194-1.587421 10.488318-6.944967 19.587643-14.655299 26.079061-7.625291 6.406378-17.489979 10.11981-28.120031 9.893035-25.653859-0.538589-51.080943 5.896136-73.531613 18.510464-21.600266 12.16078-40.280811 30.047614-53.518769 52.951833-13.294652 23.017606-19.445909 48.189569-19.190787 72.993024 0.283468 25.625512 7.45521 50.825822 20.749862 72.76625 5.555974 9.184365 7.313476 19.559296 5.58432 29.28225-1.729155 9.807995-6.916621 18.99236-15.250581 25.653858-19.360868 15.534049-39.912302 29.622412-61.455874 42.095007-21.430185 12.415901-43.824161 23.187687-67.011848 32.258664h-0.085041c-9.893035 3.855166-20.438047 3.741778-29.792492 0.368509-9.382793-3.429963-17.546673-10.11981-22.677445-19.445909-12.359207-22.53571-30.61455-41.386336-52.668364-54.425866-21.260104-12.614328-46.120252-19.842764-72.737903-19.842764s-51.477799 7.228435-72.737903 19.842764c-22.053815 13.039531-40.309157 31.890156-52.668364 54.425866-5.130772 9.326099-13.294652 16.015945-22.677445 19.445909-9.382793 3.401617-19.956151 3.486657-29.877533-0.368509l0.028347-0.028347c-23.357768-9.099325-45.723397-19.899457-67.011848-32.201971-21.571919-12.472594-42.123353-26.560957-61.484221-42.123353-8.333961-6.661499-13.521426-15.845864-15.250581-25.653858-1.729155-9.722954 0.028347-20.097885 5.58432-29.28225 13.294652-21.940427 20.466394-47.140737 20.749862-72.76625 0.255121-24.803455-5.896136-49.975418-19.190787-72.993024-13.209611-22.904219-31.918503-40.791053-53.518769-52.951833-22.422323-12.614328-47.877754-19.049053-73.531613-18.482117-10.630052 0.226774-20.49474-3.515004-28.120031-9.921382-7.681984-6.491418-13.067877-15.590743-14.655299-26.079061-1.842542-12.047392-3.231536-24.349906-4.16698-36.879194-0.935445-12.500941-1.41734-24.945189-1.41734-37.247702s0.481896-24.690068 1.41734-37.191009c0.935445-12.557635 2.324438-24.860148 4.16698-36.90754 1.587421-10.516665 6.973314-19.615989 14.655299-26.079061 7.653637-6.434725 17.489979-10.148156 28.120031-9.921382z m94.536596 19.020706c-28.800354 16.214373-61.625955 24.49164-94.848411 23.86801-1.672462 11.055254-2.919721 22.138855-3.741778 33.222456-0.822057 10.998561-1.247259 22.337283-1.24726 33.98782 0 11.678884 0.396855 23.017606 1.24726 34.044513 0.822057 11.083601 2.069317 22.138855 3.741778 33.165763 33.222456-0.595283 66.048057 7.681984 94.848411 23.896357 28.034991 15.760824 52.35655 39.090245 69.676448 69.081165 17.263205 29.877533 25.257004 62.5614 24.916842 94.706677-0.368508 33.137416-9.58122 65.736242-26.702691 94.196434 17.518326 14.031669 36.142177 26.787731 55.729819 38.126453 19.417562 11.225335 39.657181 21.004983 60.605471 29.168863 16.044292-29.055476 39.685528-53.377035 68.23076-70.300077 27.751523-16.441147 60.095228-25.880633 94.59329-25.880634s66.841767 9.439486 94.621637 25.880634c28.516886 16.923043 52.158122 41.216255 68.202413 70.27173 21.090023-8.24892 41.329642-18.000221 60.605471-29.168862 19.587643-11.310375 38.211494-24.066438 55.729819-38.098107-17.12147-28.460193-26.334182-61.059019-26.702691-94.196434-0.340162-32.145277 7.653637-64.829144 24.916842-94.706677 17.319898-29.99092 41.641457-53.320341 69.676448-69.081165 28.800354-16.214373 61.625955-24.49164 94.848411-23.896357 1.672462-11.026907 2.919721-22.110508 3.741778-33.165763 0.850404-11.026907 1.275606-22.365629 1.275607-34.044513 0-11.650537-0.425202-23.017606-1.275607-34.016167-0.822057-11.083601-2.069317-22.138855-3.741778-33.194109-33.222456 0.62363-66.048057-7.653637-94.848411-23.86801-28.006644-15.760824-52.328203-39.090245-69.648101-69.052818l-0.028347 0.028347c-17.263205-29.877533-25.257004-62.5614-24.916842-94.763371 0.368508-33.165762 9.58122-65.764589 26.702691-94.196434-17.518326-14.031669-36.142177-26.787731-55.729819-38.126454-19.275828-11.140295-39.515447-20.919942-60.605471-29.168862-16.044292 29.055476-39.685528 53.377035-68.202413 70.27173-27.779869 16.441147-60.123574 25.880633-94.621637 25.880634s-66.841767-9.439486-94.621637-25.880634c-28.516886-16.894696-52.158122-41.216255-68.202413-70.27173-21.090023 8.24892-41.329642 18.028568-60.605471 29.168862-19.587643 11.338722-38.211494 24.094785-55.729819 38.126454 17.12147 28.431846 26.334182 61.030672 26.702691 94.196434 0.340162 32.145277-7.653637 64.800797-24.916842 94.67833v0.085041c-17.263205 29.90588-41.584764 53.206954-69.676448 69.024471z m347.049939-77.500166c46.545455 0 88.697154 18.878972 119.198317 49.380135 30.529509 30.501163 49.380135 72.652862 49.380135 119.198317 0 46.573801-18.850626 88.697154-49.380135 119.226664-30.501163 30.501163-72.652862 49.380135-119.198317 49.380135s-88.697154-18.878972-119.198317-49.380135c-30.529509-30.529509-49.380135-72.652862-49.380135-119.226664 0-46.545455 18.850626-88.697154 49.380135-119.198317 30.501163-30.501163 72.652862-49.380135 119.198317-49.380135z m88.782195 79.824604c-22.734138-22.734138-54.114052-36.765807-88.782195-36.765807s-66.048057 14.031669-88.782195 36.765807c-22.705791 22.705791-36.765807 54.085705-36.765806 88.753848s14.060016 66.048057 36.765806 88.782195c22.734138 22.705791 54.114052 36.765807 88.782195 36.765806s66.048057-14.060016 88.753848-36.765806c22.734138-22.734138 36.794153-54.114052 36.794153-88.782195s-14.060016-66.048057-36.765806-88.753848z" fill="" p-id="7113"></path></svg>
                <svg title="Add step" v-on:click="createStep(stage)" v-bind:class="{ active: active == 'gallery-' + stage.temp }" t="1669819034266" class="toggle icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6163" width="20" height="20"><path d="M863.328262 481.340895l-317.344013 0.099772L545.984249 162.816826c0-17.664722-14.336138-32.00086-32.00086-32.00086s-31.99914 14.336138-31.99914 32.00086l0 318.400215-322.368714-0.17718c-0.032684 0-0.063647 0-0.096331 0-17.632039 0-31.935493 14.239806-32.00086 31.904529-0.096331 17.664722 14.208843 32.031824 31.871845 32.095471l322.59234 0.17718 0 319.167424c0 17.695686 14.336138 32.00086 31.99914 32.00086s32.00086-14.303454 32.00086-32.00086L545.982529 545.440667l317.087703-0.099772c0.063647 0 0.096331 0 0.127295 0 17.632039 0 31.935493-14.239806 32.00086-31.904529S880.960301 481.404542 863.328262 481.340895z" p-id="6164"></path></svg>
            </div>
            <div class="pipeline-playbook-stage-steps" v-bind:class="{ invisible: !stage.toggled }" v-if="stage.steps">
                <div class="pipeline-playbook-stage-step"
                     v-for="step in stage.steps"
                     v-bind:data-id="step.temp"
                     v-bind:class="{ 'active': active == 'step-' + step.temp }"
                     v-on:click="editStep(step)">
                    <table>
                        <tr>
                            <td rowspan="2" class="step-icon">
                                <img v-bind:src="'/api/gallery/' + step.stepId + '/version/' + step.version + '/package.png'" />
                            </td>
                            <td>
                                <div class="step-name">{{ step.name }}</div>
                            </td>
                        </tr>
                        <tr>
                            <td><div class="step-type">{{ step.stepId }}</div></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="pipeline-playbook-stage-add" v-on:click="createStage">
        <svg t="1669819163982" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8046" width="20" height="20"><path d="M514.048 62.464q93.184 0 175.616 35.328t143.872 96.768 96.768 143.872 35.328 175.616q0 94.208-35.328 176.128t-96.768 143.36-143.872 96.768-175.616 35.328q-94.208 0-176.64-35.328t-143.872-96.768-96.768-143.36-35.328-176.128q0-93.184 35.328-175.616t96.768-143.872 143.872-96.768 176.64-35.328zM772.096 576.512q26.624 0 45.056-18.944t18.432-45.568-18.432-45.056-45.056-18.432l-192.512 0 0-192.512q0-26.624-18.944-45.568t-45.568-18.944-45.056 18.944-18.432 45.568l0 192.512-192.512 0q-26.624 0-45.056 18.432t-18.432 45.056 18.432 45.568 45.056 18.944l192.512 0 0 191.488q0 26.624 18.432 45.568t45.056 18.944 45.568-18.944 18.944-45.568l0-191.488 192.512 0z" p-id="8047"></path></svg>
        <span>{{ $root.localization.sr('PIPELINE_EDIT_PLAYBOOK_ADD_STAGE') }}</span>
    </div>
</div>
<div id="pipeline-edit-playbook-container"></div>