<!--
    Copyright (c) Yuko(Yisheng) Zheng. All rights reserved.
    Licensed under the MIT. See LICENSE in the project root for license information.
-->
<div class="system-users-main" v-if="result">
    <div class="system-users-table-outer">
        <div class="form-filter-outer">
            <div class="form-filter">
                <svg t="1670836634332" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="20" height="20"><path d="M512 128c212.075 0 384 171.925 384 384S724.075 896 512 896 128 724.075 128 512s171.925-384 384-384z m0 64c-176.725 0-320 143.275-320 320 0 91.243 38.187 173.547 99.413 231.85l108.523-129.386a195.861 195.861 0 0 0 60.01 28.053l-117.93 140.651A318.507 318.507 0 0 0 512 832a318.507 318.507 0 0 0 161.237-43.52l-120.17-143.296a195.541 195.541 0 0 0 62.442-25.088L725.1 750.72A319.21 319.21 0 0 0 832 512c0-176.725-143.275-320-320-320z m0 106.667a154.07 154.07 0 0 1 76.373 287.914l-0.64 0.363-0.704 0.405a153.685 153.685 0 0 1-4.928 2.624l5.632-3.029A153.685 153.685 0 0 1 512 606.805a153.643 153.643 0 0 1-58.07-11.306l-0.213-0.086a153.173 153.173 0 0 1-5.653-2.453l5.888 2.56a153.195 153.195 0 0 1-20.97-10.475A154.07 154.07 0 0 1 512 298.667z m0 64a90.07 90.07 0 1 0 0 180.138 90.07 90.07 0 0 0 0-180.138z" p-id="4103"></path></svg>
                <input class="system-users-header-search text" type="text" v-bind:placeholder="$root.localization.sr('SYSTEM_USER_FILTER_USER_NAME')" v-model="search.name" />
                <a class="form-clear-button" title="Clear" v-on:click="search.name = null">
                    <svg t="1670831104615" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5081" width="20" height="20"><path d="M547.14368 512l329.45664 329.45664a23.04 23.04 0 0 1-32.58368 32.58368L514.56 544.58368l-329.45664 329.45664a23.04 23.04 0 0 1-32.58368-32.58368L481.97632 512 152.51968 182.54336a23.04 23.04 0 0 1 32.58368-32.58368L514.56 479.41632l329.45664-329.45664a23.04 23.04 0 0 1 32.58368 32.58368L547.14368 512z" fill="#000000" p-id="5082"></path></svg>
                </a>
            </div>
            <div class="form-filter" style="margin-left: 15px">
                <svg t="1670392603477" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5477" width="20" height="20"><path d="M469.333533 968.08a52.986667 52.986667 0 0 1-37.713333-15.62l-416-416A52.986667 52.986667 0 0 1 0.0002 498.746667V138.666667a53.393333 53.393333 0 0 1 53.333333-53.333334h360.08a52.986667 52.986667 0 0 1 37.713334 15.62l416 416a53.4 53.4 0 0 1 0 75.426667l-360.08 360.08a52.986667 52.986667 0 0 1-37.713334 15.62zM53.333533 128a10.666667 10.666667 0 0 0-10.666666 10.666667v360.08a10.573333 10.573333 0 0 0 3.126666 7.54l416 416a10.666667 10.666667 0 0 0 15.08 0l360.08-360.08a10.666667 10.666667 0 0 0 0-15.08l-416-416a10.573333 10.573333 0 0 0-7.54-3.126667z m224 341.333333c-58.813333 0-106.666667-47.853333-106.666666-106.666666s47.853333-106.666667 106.666666-106.666667 106.666667 47.853333 106.666667 106.666667-47.853333 106.666667-106.666667 106.666666z m0-170.666666a64 64 0 1 0 64 64 64.073333 64.073333 0 0 0-64-64z m335.086667 676.42l382.706667-382.706667a53.4 53.4 0 0 0 0-75.426667L569.753533 91.58a21.333333 21.333333 0 0 0-30.173333 30.173333l425.373333 425.373334a10.666667 10.666667 0 0 1 0 15.08l-382.706666 382.706666a21.333333 21.333333 0 0 0 30.173333 30.173334z" fill="#5C5C66" p-id="5478"></path></svg>
                <select class="system-users-header-search select" v-model="search.role">
                    <option v-bind:value="null">{{ $root.localization.sr('SYSTEM_USER_FILTER_BY_ROLES') }}</option>
                    <option value="SystemAdmin">{{ $root.localization.sr('SYSTEM_USER_FILTER_BY_ROLES_SYSTEM_ADMIN') }}</option>
                    <option value="Collaborator">{{ $root.localization.sr('SYSTEM_USER_FILTER_BY_ROLES_COLLABORATOR') }}</option>
                </select>
            </div>
            <div class="form-filter" style="margin-left: 15px" v-if="providers.length">
                <svg t="1670846447750" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5693" width="20" height="20"><path d="M320 938.666667c-68.266667 0-140.8-25.6-196.266667-81.066667-110.933333-110.933333-106.666667-290.133333 4.266667-396.8 98.133333-93.866667 247.466667-102.4 354.133333-25.6l384-384c17.066667-17.066667 42.666667-17.066667 59.733334 0s17.066667 42.666667 0 59.733333L870.4 170.666667l98.133333 98.133333c17.066667 17.066667 17.066667 42.666667 0 59.733333l-149.333333 149.333334c-17.066667 17.066667-42.666667 17.066667-59.733333 0l-98.133334-98.133334-115.2 115.2c81.066667 106.666667 72.533333 260.266667-25.6 358.4-55.466667 59.733333-128 85.333333-200.533333 85.333334z m4.266667-465.066667c-46.933333 0-98.133333 17.066667-132.266667 55.466667-76.8 72.533333-76.8 196.266667-4.266667 273.066666 76.8 76.8 200.533333 76.8 273.066667 0 72.533333-76.8 72.533333-196.266667 0-273.066666-42.666667-38.4-89.6-55.466667-136.533333-55.466667z m396.8-153.6l68.266666 68.266667L878.933333 298.666667 810.666667 230.4l-89.6 89.6z" p-id="5694"></path></svg>
                <select class="system-users-header-search select" v-model="search.provider">
                    <option v-bind:value="null">{{ $root.localization.sr('SYSTEM_USER_FILTER_BY_PROVIDERS') }}</option>
                    <option v-bind:value="provider.id" v-for="provider in providers">{{ provider.name }}</option>
                </select>
            </div>
            <a class="system-users-header-search-button new-job"
               v-if="localProvider"
               href="/system/users/new">
                <svg t="1670399129873" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4256" width="20" height="20"><path d="M800 480l-256 0L544 224c0-17.664-14.336-32-32-32s-32 14.336-32 32l0 256L224 480c-17.664 0-32 14.336-32 32s14.336 32 32 32l256 0 0 256c0 17.696 14.336 32 32 32s32-14.304 32-32l0-256 256 0c17.696 0 32-14.336 32-32S817.696 480 800 480z" p-id="4257"></path></svg>
                <span>{{ $root.localization.sr('SYSTEM_USER_CREATE_LOCAL_USER') }}</span>
            </a>
        </div>
        <table class="system-users-table">
            <colgroup>
                <col style="width: 25px;" />
            </colgroup>
            <thead v-if="result.data.length">
                <tr>
                    <th></th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_USERNAME') }}</th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_DISPLAY_NAME') }}</th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_EMAIL') }}</th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_ROLE') }}</th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_PROVIDER') }}</th>
                    <th>{{ $root.localization.sr('SYSTEM_USER_ACTIONS') }}</th>
                </tr>
            </thead>
            <tbody v-for="user in result.data">
                <tr>
                    <td>
                        <img class="system-users-avatar" src="/assets/img/no-avatar.png" />
                    </td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.displayName }}</td>
                    <td>{{ user.email }}</td>
                    <td v-bind:class="{ 'is-admin': user.role == 'SystemAdmin' }">{{ roleMapping[user.role] }}</td>
                    <td class="system-users-login-provider-cell">
                        <template v-if="getProviderById(user.loginProviderId)">
                            <img class="system-users-login-provider-icon" v-if="providers.length" v-bind:src="getProviderById(user.loginProviderId).iconUrl" />
                            <span>{{ getProviderName(user.loginProviderId) }}</span>
                        </template>
                        <template v-else>
                            ({{ $root.localization.sr('SYSTEM_USER_DISABLED') }})
                        </template>
                    </td>
                    <td>
                        <template v-if="getProviderById(user.loginProviderId)">
                            <a class="system-users-button" v-bind:href="`/system/users/edit?providerId=${encodeURIComponent(user.loginProviderId)}&username=${encodeURIComponent(user.username)}`">{{ $root.localization.sr('SYSTEM_USER_ACTIONS_EDIT') }}</a>
                            <a class="system-users-button danger" v-on:click="remove(user)" v-if="localProvider && localProvider.id == user.loginProviderId">{{ $root.localization.sr('SYSTEM_USER_ACTIONS_DELETE') }}</a>
                        </template>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="pipeline-job-pagination">
        <ul class="pipeline-job-nav">
            <li class="pipeline-job-nav-page" v-on:click="getUsers(1)"><a>«</a></li>
            <li class="pipeline-job-nav-page" v-for="x in paging" v-bind:class="{ active: result && result.currentPage == x }" v-on:click="getUsers(x)"><a>{{ x }}</a></li>
            <li class="pipeline-job-nav-page" v-on:click="getUsers(result.totalPages)"><a>»</a></li>
        </ul>
    </div>
</div>