<div class="step-node" v-on:click="onClicked">
    <img class="step-node-icon" src="/api/gallery/run-powershell-script/version/1.0.1/package.png" />
    <span class="step-node-title">{{ shape.name || 'Step' }}</span>
    <template v-for="(anchor, i) in shape.anchors">
        <a class="step-node-anchor-arrow" v-bind:class="{ active: $parent.connectFrom == anchor, connecting: $parent.mode == 'connect' }" v-on:click="link(anchor)" pomelo-wf-anchor v-bind:style="'color: ' + shape.diagram.connectPolylines.filter(x => x.getDestinationAnchor() == anchor)[0].getColor()" v-if="shape.diagram.connectPolylines.some(x => x.getDestinationAnchor() == anchor)" v-bind:style="`top: ${anchor.yPercentage * 100}%; left: ${anchor.xPercentage * 100}%; transform: rotate(${90 * i}deg);`">â–¼</a>
        <a class="step-node-anchor" v-bind:class="{ active: $parent.connectFrom == anchor, connecting: $parent.mode == 'connect' }" v-on:click="link(anchor)" pomelo-wf-anchor v-else-if="active || $parent.mode == 'connect'" v-bind:style="`top: ${anchor.yPercentage * 100}%; left: ${anchor.xPercentage * 100}%`"></a>
    </template>
    <div class="step-node-settings" v-if="settingsActive && !shape.arguments.StepId">
        <div class="step-node-settings-header">
            <svg t="1674556747801" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2857" width="20" height="20"><path d="M907.636364 814.545455a23.272727 23.272727 0 0 1-23.272728 23.272727H139.636364a23.272727 23.272727 0 0 1-23.272728-23.272727v-128A34.909091 34.909091 0 0 0 81.454545 651.636364 34.909091 34.909091 0 0 0 46.545455 686.545455V814.545455a93.090909 93.090909 0 0 0 93.090909 93.090909h744.727272a93.090909 93.090909 0 0 0 93.090909-93.090909v-128a34.909091 34.909091 0 0 0-34.90909-34.909091 34.909091 34.909091 0 0 0-34.909091 34.909091zM884.363636 116.363636H139.636364a93.090909 93.090909 0 0 0-93.090909 93.090909v128A34.909091 34.909091 0 0 0 81.454545 372.363636 34.909091 34.909091 0 0 0 116.363636 337.454545V209.454545a23.272727 23.272727 0 0 1 23.272728-23.272727h744.727272a23.272727 23.272727 0 0 1 23.272728 23.272727v128a34.909091 34.909091 0 0 0 34.909091 34.909091 34.909091 34.909091 0 0 0 34.90909-34.909091V209.454545a93.090909 93.090909 0 0 0-93.090909-93.090909zM168.029091 640a35.374545 35.374545 0 0 1-30.487273-17.92 34.909091 34.909091 0 0 1 13.730909-46.545455L263.68 512 151.272727 449.396364A34.909091 34.909091 0 1 1 186.181818 388.421818l153.832727 85.410909a43.52 43.52 0 0 1 0 76.334546L186.181818 635.578182a34.210909 34.210909 0 0 1-18.152727 4.421818z m137.076364-104.727273zM447.301818 640a35.374545 35.374545 0 0 1-30.487273-17.92 34.909091 34.909091 0 0 1 13.73091-46.545455L542.952727 512l-112.407272-62.603636a34.909091 34.909091 0 1 1 34.90909-60.974546l153.832728 85.410909a43.52 43.52 0 0 1 0 76.334546L465.454545 635.578182a34.210909 34.210909 0 0 1-18.152727 4.421818z m137.076364-104.727273zM726.574545 640a35.374545 35.374545 0 0 1-30.487272-17.92 34.909091 34.909091 0 0 1 13.730909-46.545455L822.225455 512l-112.407273-62.603636a34.909091 34.909091 0 1 1 34.909091-60.974546l153.832727 85.410909a43.52 43.52 0 0 1 0 76.334546L744.727273 635.578182a34.210909 34.210909 0 0 1-18.152728 4.421818z m137.076364-104.727273z" fill="#EE7F51" p-id="2858" data-spm-anchor-id="a313x.7781069.0.i0" class="selected"></path></svg>
            <span>Select Step</span>
        </div>
        <div class="step-node-settings-search">
            <input type="text" class="step-node-settings-search-textbox" v-model="search.name" placeholder="Filter by name" />
        </div>
        <div class="step-node-settings-body">
            <div class="step-node-settings-package-item" 
                 v-for="(package, i) in result.data" 
                 v-if="result"
                 v-bind:class="{ active: selected == package }"
                 v-on:click="selectStep(package)">
                <table class="gallery-package-item">
                    <colgroup>
                        <col style="width: 60px" />
                        <col />
                        <col style="width: 70px" />
                    </colgroup>
                    <tbody>
                        <tr>
                            <td rowspan="3" class="gallery-package-icon vertical-top">
                                <img v-bind:src="`/api/gallery/${package.id}/version/${package.version}/package.png`" />

                                <br />

                                <a v-bind:title="getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_PLATFORM_SUPPORTED', 'Windows')" v-if="package.platform.indexOf('Windows') >= 0">
                                    <svg t="1669957316153" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5807" width="20" height="20"><path d="M490.666667 128v362.666667H128V128h362.666667z m0 768H128v-362.666667h362.666667V896z m42.666666-768H896v362.666667h-362.666667V128z m362.666667 405.333333V896h-362.666667v-362.666667H896z" p-id="5808"></path></svg>
                                </a>
                                <a v-bind:title="getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_PLATFORM_SUPPORTED', 'Linux')" v-if="package.platform.indexOf('Linux') >= 0">
                                    <svg t="1669957423206" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6566" width="20" height="20"><path d="M452 234.857143q-6.285714 0.571429-8.857143 6t-4.857143 5.428571q-2.857143 0.571429-2.857143-2.857143 0-6.857143 10.857143-8.571429l5.714286 0zm49.714286 8q-2.285714 0.571429-6.571429-3.714286t-10-2.571429q13.714286-6.285714 18.285714 1.142857 1.714286 3.428571-1.714286 5.142857zm-200.571429 244q-2.285714-0.571429-3.428571 1.714286t-2.571429 7.142857-3.142857 7.714286-5.714286 7.428571q-4 5.714286-0.571429 6.857143 2.285714 0.571429 7.142857-4t7.142857-10.285714q0.571429-1.714286 1.142857-4t1.142857-3.428571 0.857143-2.571429 2.857143-2.285714l0-1.714286-0.571429-1.428571-1.714286-1.142857zm488.571429 205.142857q0-10.285714-31.428571-24 2.285714-8.571429 4.285714-15.714286t2.857143-14.857143 1.714286-12.285714 2.857143-12.857143-0.571429-11.142857-2-12.571429-2.285714-11.714286-2.857143-14.285714-3.142857-15.142857q-5.714286-27.428571-26.857143-58.857143t-41.142857-42.857143q13.714286 11.428571 32.571429 47.428571 49.714286 92.571429 30.857143 158.857143-6.285714 22.857143-28.571429 24-17.714286 2.285714-22-10.571429t-4.571429-47.714286-6.571429-61.142857q-5.142857-22.285714-11.142857-39.428571t-11.142857-26-8.857143-14-7.428571-8.571429-4.285714-4q-8-35.428571-17.714286-58.857143t-16.857143-32-13.428571-18.857143-8.571429-22.857143q-2.285714-12 3.428571-30.571429t2.571429-28.285714-25.428571-14.285714q-8.571429-1.714286-25.428571-10.285714t-20.285714-9.142857q-4.571429-0.571429-6.285714-14.857143t4.571429-29.142857 20.571429-15.428571q21.142857-1.714286 29.142857 17.142857t2.285714 33.142857q-6.285714 10.857143-1.142857 15.142857t17.142857 2.857143q7.428571-2.285714 7.428571-20.571429l0-21.142857q-2.857143-17.142857-7.714286-28.571429t-12-17.428571-13.428571-8.571429-15.428571-4.285714q-61.142857 4.571429-50.857143 76.571429 0 8.571429-0.571429 8.571429-5.142857-5.142857-16.857143-6t-18.857143 2.857143-8.857143-2.857143q0.571429-32.571429-9.142857-51.428571t-25.714286-19.428571q-15.428571-0.571429-23.714286 15.714286t-9.428571 34q-0.571429 8.571429 2 21.142857t7.428571 21.428571 8.857143 7.714286q5.714286-1.714286 9.142857-8 2.285714-5.142857-4-4.571429-4 0-8.857143-8.285714t-5.428571-19.142857q-0.571429-12.571429 5.142857-21.142857t19.428571-8q9.714286 0 15.428571 12t5.428571 22.285714-0.857143 12.571429q-12.571429 8.571429-17.714286 16.571429-4.571429 6.857143-15.714286 13.428571t-11.714286 7.142857q-7.428571 8-8.857143 15.428571t4.285714 10.285714q8 4.571429 14.285714 11.142857t9.142857 10.857143 10.571429 7.428571 20.285714 3.714286q26.857143 1.142857 58.285714-8.571429 1.142857-0.571429 13.142857-4t19.714286-6 16.857143-7.428571 12-10q5.142857-8 11.428571-4.571429 2.857143 1.714286 3.714286 4.857143t-1.714286 6.857143-9.428571 5.428571q-11.428571 3.428571-32.285714 12.285714t-26 11.142857q-25.142857 10.857143-40 13.142857-14.285714 2.857143-45.142857-1.142857-5.714286-1.142857-5.142857 1.142857t9.714286 10.857143q14.285714 13.142857 38.285714 12.571429 9.714286-0.571429 20.571429-4t20.571429-8 19.142857-10 17.142857-9.714286 14-6.857143 10-1.428571 4.857143 6.285714q0 1.142857-0.571429 2.571429t-2.285714 2.857143-3.428571 2.571429-4.857143 2.857143-5.142857 2.571429-5.714286 2.857143-5.428571 2.571429q-16 8-38.571429 25.142857t-38 24.571429-28 0.571429q-12-6.285714-36-41.714286-12.571429-17.714286-14.285714-12.571429-0.571429 1.714286-0.571429 5.714286 0 14.285714-8.571429 32.285714t-16.857143 31.714286-12 33.142857 6.571429 36q-13.142857 3.428571-35.714286 51.428571t-27.142857 80.571429q-1.142857 10.285714-0.857143 39.428571t-3.142857 33.714286q-4.571429 13.714286-16.571429 1.714286-18.285714-17.714286-20.571429-53.714286-1.142857-16 2.285714-32 2.285714-10.857143-0.571429-10.285714l-2.285714 2.857143q-20.571429 37.142857 5.714286 94.857143 2.857143 6.857143 14.285714 16t13.714286 11.428571q11.428571 13.142857 59.428571 51.714286t53.142857 43.714286q9.142857 8.571429 10 21.714286t-8 24.571429-26 13.142857q4.571429 8.571429 16.571429 25.428571t16 30.857143 4 40.285714q26.285714-13.714286 4-52.571429-2.285714-4.571429-6-9.142857t-5.428571-6.857143-1.142857-3.428571q1.714286-2.857143 7.428571-5.428571t11.428571 1.428571q26.285714 29.714286 94.857143 20.571429 76-8.571429 101.142857-49.714286 13.142857-21.714286 19.428571-17.142857 6.857143 3.428571 5.714286 29.714286-0.571429 14.285714-13.142857 52.571429-5.142857 13.142857-3.428571 21.428571t13.714286 8.857143q1.714286-10.857143 8.285714-44t7.714286-51.428571q1.142857-12-3.714286-42t-4.285714-55.428571 13.142857-40.285714q8.571429-10.285714 29.142857-10.285714 0.571429-21.142857 19.714286-30.285714t41.428571-6 34.285714 12.857143zm-358.857143-472.571429q1.714286-9.714286-1.428571-17.142857t-6.571429-8.571429q-5.142857-1.142857-5.142857 4 1.142857 2.857143 2.857143 3.428571 5.714286 0 4 8.571429-1.714286 11.428571 4.571429 11.428571 1.714286 0 1.714286-1.714286zm239.428571 112.571429q-1.142857-4.571429-3.714286-6.571429t-7.428571-2.857143-8.285714-3.142857q-2.857143-1.714286-5.428571-4.571429t-4-4.571429-3.142857-3.714286-2.285714-2.285714-2.285714 0.857143q-8 9.142857 4 24.857143t22.285714 18q5.142857 0.571429 8.285714-4.571429t2-11.428571zm-101.714286-121.714286q0-6.285714-2.857143-11.142857t-6.285714-7.142857-5.142857-1.714286q-8 0.571429-4 4l2.285714 1.142857q8 2.285714 10.285714 17.714286 0 1.714286 4.571429-1.142857zm30.857143-133.142857q0-1.142857-1.428571-2.857143t-5.142857-4-5.428571-3.428571q-8.571429-8.571429-13.714286-8.571429-5.142857 0.571429-6.571429 4.285714t-0.571429 7.428571 2.857143 7.142857q-0.571429 2.285714-3.428571 6t-3.428571 5.142857 1.714286 4.857143q2.285714 1.714286 4.571429 0t6.285714-5.142857 8.571429-5.142857q0.571429-0.571429 5.142857-0.571429t8.571429-1.142857 5.142857-4zm322.857143 766.285714q11.428571 6.857143 17.714286 14t6.857143 13.714286-1.428571 12.857143-8.857143 12.571429-13.428571 11.142857-17.142857 10.571429-18 9.428571-18.285714 8.857143-15.428571 7.428571q-21.714286 10.857143-48.857143 32t-43.142857 36.571429q-9.714286 9.142857-38.857143 11.142857t-50.857143-8.285714q-10.285714-5.142857-16.857143-13.428571t-9.428571-14.571429-12.571429-11.142857-26.857143-5.428571q-25.142857-0.571429-74.285714-0.571429-10.857143 0-32.571429 0.857143t-33.142857 1.428571q-25.142857 0.571429-45.428571 8.571429t-30.571429 17.142857-24.857143 16.285714-30.571429 6.571429q-16.571429-0.571429-63.428571-17.714286t-83.428571-24.571429q-10.857143-2.285714-29.142857-5.428571t-28.571429-5.142857-22.571429-5.428571-19.142857-8.285714-9.714286-11.142857q-5.714286-13.142857 4-38t10.285714-31.142857q0.571429-9.142857-2.285714-22.857143t-5.714286-24.285714-2.571429-20.857143 6-15.428571q8-6.857143 32.571429-8t34.285714-6.857143q17.142857-10.285714 24-20t6.857143-29.142857q12 41.714286-18.285714 60.571429-18.285714 11.428571-47.428571 8.571429-19.428571-1.714286-24.571429 5.714286-7.428571 8.571429 2.857143 32.571429 1.142857 3.428571 4.571429 10.285714t4.857143 10.285714 2.571429 9.714286 0.571429 12.571429q0 8.571429-9.714286 28t-8 27.428571q1.714286 9.714286 21.142857 14.857143 11.428571 3.428571 48.285714 10.571429t56.857143 11.714286q13.714286 3.428571 42.285714 12.571429t47.142857 13.142857 31.714286 2.285714q24.571429-3.428571 36.857143-16t13.142857-27.428571-4.285714-33.428571-10.857143-29.714286-11.428571-20.857143q-69.142857-108.571429-96.571429-138.285714-38.857143-42.285714-64.571429-22.857143-6.285714 5.142857-8.571429-8.571429-1.714286-9.142857-1.142857-21.714286 0.571429-16.571429 5.714286-29.714286t13.714286-26.857143 12.571429-24q4.571429-12 15.142857-41.142857t16.857143-44.571429 17.142857-34.857143 22.285714-30.857143q62.857143-81.714286 70.857143-111.428571-6.857143-64-9.142857-177.142857-1.142857-51.428571 13.714286-86.571429t60.571429-59.714286q22.285714-12 59.428571-12 30.285714-0.571429 60.571429 7.714286t50.857143 23.714286q32.571429 24 52.285714 69.428571t16.857143 84.285714q-2.857143 54.285714 17.142857 122.285714 19.428571 64.571429 76 124.571429 31.428571 33.714286 56.857143 93.142857t34 109.142857q4.571429 28 2.857143 48.285714t-6.857143 31.714286-11.428571 12.571429q-5.714286 1.142857-13.428571 10.857143t-15.428571 20.285714-23.142857 19.142857-34.857143 8q-10.285714-0.571429-18-2.857143t-12.857143-7.714286-7.714286-8.857143-6.571429-11.714286-5.142857-11.142857q-12.571429-21.142857-23.428571-17.142857t-16 28 4 55.428571q11.428571 40 0.571429 111.428571-5.714286 37.142857 10.285714 57.428571t41.714286 18.857143 48.571429-20.285714q33.714286-28 51.142857-38t59.142857-24.285714q30.285714-10.285714 44-20.857143t10.571429-19.714286-14.285714-16.285714-29.428571-13.428571q-18.857143-6.285714-28.285714-27.428571t-8.571429-41.428571 8.857143-27.142857q0.571429 17.714286 4.571429 32.285714t8.285714 23.142857 11.714286 16.285714 12 10.857143 12.285714 7.428571 9.428571 5.428571z" p-id="6567"></path></svg>
                                </a>
                                <a v-bind:title="getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_PLATFORM_SUPPORTED', 'Mac')" v-if="package.platform.indexOf('Mac') >= 0">
                                    <svg t="1669957472049" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7524" width="20" height="20"><path d="M905.714286 694.285714q-22.285714 71.428571-70.285714 142.857143-73.714286 112-146.857143 112-28 0-80-18.285714-49.142857-18.285714-86.285714-18.285714-34.857143 0-81.142857 18.857143-46.285714 19.428571-75.428571 19.428571-86.857143 0-172-148-84-149.142857-84-287.428571 0-130.285714 64.571429-213.714286 64-82.285714 162.285714-82.285714 41.142857 0 101.142857 17.142857 59.428571 17.142857 78.857143 17.142857 25.714286 0 81.714286-19.428571 58.285714-19.428571 98.857143-19.428571 68 0 121.714286 37.142857 29.714286 20.571429 59.428571 57.142857-45.142857 38.285714-65.142857 67.428571-37.142857 53.714286-37.142857 118.285714 0 70.857143 39.428571 127.428571t90.285714 72zm-214.857143-670.285714q0 34.857143-16.571429 77.714286-17.142857 42.857143-53.142857 78.857143-30.857143 30.857143-61.714286 41.142857-21.142857 6.285714-59.428571 9.714286 1.714286-85.142857 44.571429-146.857143 42.285714-61.142857 142.857143-84.571429 0.571429 1.714286 1.428571 6.285714t1.428571 6.285714q0 2.285714 2.857143 5.714286t2.857143 5.714286z" p-id="7525"></path></svg>
                                </a>
                            </td>
                            <td class="gallery-package-title gallery-package-padding-left">{{ package.name }}</td>
                        </tr>
                        <tr>
                            <td class="gallery-package-status gallery-package-padding-left">
                                <span>
                                    {{ getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_LATEST_VERSION') }}: {{ package.version }}
                                </span>
                                <span>
                                    {{ getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_UPDATED_AT') }}: {{ getRoot().moment(package.uploadedAt).format('YYYY-MM-DD') }}
                                </span>
                                <span>
                                    {{ getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_PACKAGE_ID') }}: {{ package.id }}
                                </span>
                                <span>
                                    {{ getRoot().localization.sr('PIPELINE_EDIT_PLAYBOOK_STEP_GALLERY_AUTHOR') }}: {{ package.authorId }}
                                </span>
                            </td>
                        </tr>
                        <tr>
                            <td class="gallery-package-padding-left package-description">{{ package.description }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="step-node-settings-footer">
            <a class="step-node-settings-footer-button" v-on:click="blur">OK</a>
        </div>
    </div>
</div>